#!/usr/bin/env php
<?php

if (PHP_VERSION_ID < 70200) {
    fwrite(
        STDERR,
        sprintf(
            'This version of PHPBrew is supported on PHP 7.2.0 or newer' . PHP_EOL .
            'You are using PHP %s (%s).' . PHP_EOL,
            PHP_VERSION,
            PHP_BINARY
        )
    );

    die(1);
}

$includeIfExists = function($file)
{
    return file_exists($file) ? include $file : false;
};

if (
    (!$loader = $includeIfExists(__DIR__.'/../vendor/autoload.php'))
    && (!$loader = $includeIfExists(__DIR__.'/../../../autoload.php'))
) {
    echo 'You must set up the project dependencies, run the following commands:'.PHP_EOL.
        'curl -sS https://getcomposer.org/installer | php'.PHP_EOL.
        'php composer.phar install'.PHP_EOL;
    exit(1);
}

$console = PHPBrew\Console::getInstance();
if (isset($argv)) {
    if (!$console->runWithTry($argv)) {
        exit(-1);
    }
}
